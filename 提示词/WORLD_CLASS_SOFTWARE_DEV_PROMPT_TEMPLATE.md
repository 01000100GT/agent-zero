# Meta-Prompt: 世界级软件开发与产品构建全流程指南

## 核心原则 (Core Principles)

本指南旨在驱动一个以终为始、深度思考、持续迭代的软件开发过程。它融合了顶级产品管理、架构设计与AI工程的最佳实践。请在每个阶段都秉持以下原则：

- **用户中心 (User-Centric)**: 一切决策回归到为用户创造的价值。
- **架构先行 (Architecture First)**: 在编写大量代码前，拥有清晰、健壮、可演进的架构蓝图。
- **质量内建 (Quality Built-in)**: 质量是设计和开发出来的，而不是测试出来的。
- **拥抱迭代 (Embrace Iteration)**: 快速交付价值，并通过反馈持续优化。
- **文档即代码 (Docs as Code)**: 将高质量的文档视为项目不可或缺的交付物。

---

## 0. 前置思考与战略对齐 (Phase 0: Pre-computation & Strategic Alignment)

**目标**: 在投入资源前，确保团队对项目的商业目标、约束条件和成功标准有统一且清晰的认知。

**行动步骤**:
1.  **商业目标澄清 (Clarify Business Goals)**: 
    - 我们为什么要做这个项目？(Why)
    - 它要解决的核心商业问题是什么？
    - 我们期望达成的商业指标是什么？(e.g., 提高用户留存率10%, 降低运营成本20%)
2.  **约束与资源定义 (Define Constraints & Resources)**:
    - **时间 (Timeline)**: 项目的关键里程碑和最终交付日期是什么？
    - **预算 (Budget)**: 项目可用的人力、物力和财力资源有多少？
    - **技术/合规边界 (Boundaries)**: 是否有必须遵守的技术栈、法律法规或安全合规要求？
3.  **成功标准定义 (Define Success Criteria)**:
    - **产品维度**: 什么样的产品表现（功能、性能、用户反馈）算作成功？
    - **技术维度**: 什么样的工程质量（代码质量、系统稳定性、可维护性）算作成功？
    - **量化指标 (Quantifiable Metrics)**: 定义清晰的、可衡量的成功指标 (OKRs or KPIs)。

**反思与决策检查点**: 我们是否对项目的“为什么”和“做什么”达成了共识？成功标准是否清晰、可衡量？

**交付物**: 一份简洁的《项目章程 (Project Charter)》，包含上述所有问题的答案。

---

## 1. 产品定义与市场分析 (Phase 1: Product Definition & Market Analysis)

**目标**: 深度理解目标用户和市场，定义一个有价值、可落地、有差异化竞争力的产品。

**行动步骤**:
1.  **市场与竞品分析 (Market & Competitive Analysis)**:
    - 市场规模与趋势如何？
    - 主要竞品有哪些？他们的优势和劣势分别是什么？
    - 我们的差异化机会在哪里？
2.  **用户画像与场景挖掘 (User Personas & Scenarios)**:
    - 创建1-3个核心用户画像 (Personas)，包含他们的人口统计学特征、目标、动机和痛点。
    - 描述这些用户在典型场景 (Scenarios) 下如何与产品互动，他们的期望是什么？
3.  **价值主张设计 (Value Proposition Design)**:
    - 使用“价值主张画布”工具，清晰地定义我们的产品如何为用户“创造收益 (Gains)”和“解除痛点 (Pains)”。
    - 用一句话凝练出产品的核心价值主张。
4.  **功能规划与优先级排序 (Feature Planning & Prioritization)**:
    - 通过头脑风暴，列出所有可能的功能点 (Feature Candidates)。
    - 使用 RICE、MoSCoW 或其他优先级排序框架，确定MVP（最小可行产品）的核心功能集。
    - 以用户故事 (User Story) 格式编写MVP功能列表，并附带清晰的验收标准 (Acceptance Criteria)。
5.  **产品路线图 (Product Roadmap)**: 规划从MVP到V1.0，再到未来的产品演进路线图。

**反思与决策检查点**: 我们的产品真的解决了用户的核心痛点吗？MVP是否足够“小”以快速验证，又足够“有价值”以吸引用户？

**交付物**: 《产品需求文档 (PRD)》，包含用户画像、竞品分析、价值主张、MVP功能列表和产品路线图。

---

## 2. 系统架构与技术设计 (Phase 2: System Architecture & Technical Design)

**目标**: 基于产品需求，设计一个健壮、可扩展、可维护的系统架构，并为关键技术挑战制定解决方案。

**行动步骤**:
1.  **确立架构原则 (Establish Architectural Principles)**:
    - 定义指导我们技术决策的核心原则。例如：“优先选择成熟的技术”、“设计应是无状态的”、“通过API进行所有通信”。
2.  **质量属性权衡 (Quality Attribute Trade-offs)**:
    - 识别并排序本系统最重要的质量属性（非功能性需求），如：**性能、安全性、可扩展性、可维护性、成本效益、可靠性**。
    - 明确阐述在设计中为了某个属性（如极致性能）而牺牲了另一个属性（如开发速度）的决策和理由。
3.  **高阶架构设计 (High-Level Architecture)**:
    - 使用 C4 模型（或类似的架构可视化方法）绘制系统上下文图 (Context)、容器图 (Container)。
    - 确定核心的技术范式（如：微服务、单体、事件驱动）。
    - 进行技术选型（语言、框架、数据库、中间件），并提供充分的选型依据（POC验证结果、社区活跃度、团队熟悉度等）。
4.  **模块化与接口设计 (Modularization & Interface Design)**:
    - 将系统划分为高内聚、低耦合的模块/服务。
    - 定义模块/服务间的通信协议和API接口（如 RESTful, gRPC, GraphQL）。使用 OpenAPI/Swagger 或类似工具进行精确定义。
    - 设计核心的数据模型和数据库表结构。
5.  **关键机制设计 (Design of Critical Mechanisms)**:
    - 针对系统的复杂部分进行深度设计，例如：认证与授权、分布式事务、缓存策略、数据一致性、AI Agent的逻辑流、提示词管理系统等。
6.  **技术风险评估 (Assess Technical Risks)**: 识别潜在的技术风险（如：性能瓶颈、第三方服务依赖、新技术引入的不确定性），并制定缓解计划。

**反思与决策检查点**: 当前架构是否能支撑未来2-3年的产品路线图？我们是否对最复杂的技术挑战有了清晰的解决方案？

**交付物**: 《系统设计文档 (SDD)》，包含架构原则、质量属性分析、架构图、技术选型、API定义、数据模型和风险评估。

---

## 3. 卓越工程与实施规划 (Phase 3: Engineering Excellence & Implementation Plan)

**目标**: 将系统设计转化为一个可执行、高质量、高效率的开发计划。

**行动步骤**:
1.  **开发工作流定义 (Define Development Workflow)**:
    - 确定版本控制策略（如 GitFlow）。
    - 建立代码审查 (Code Review) 标准和流程。
    - 搭建本地开发环境和调试工具链。
2.  **任务分解与排期 (Task Breakdown & Scheduling)**:
    - 将SDD中的模块和功能分解为更小的、可独立开发和测试的任务 (Epics, Stories, Tasks)。
    - 估算工作量，并制定详细的迭代计划 (Sprint Plan) 或项目排期 (Gantt Chart)。
3.  **CI/CD 管道设计 (Design CI/CD Pipeline)**:
    - 设计自动化构建、测试、部署的流水线。
    - 定义不同环境（开发、测试、预发布、生产）的部署策略。
4.  **代码规范与质量门禁 (Coding Standards & Quality Gates)**:
    - 制定统一的编码风格指南。
    - 配置静态代码分析 (Linting)、单元测试覆盖率等质量门禁。
5.  **监控与可观测性设计 (Monitoring & Observability Design)**:
    - 确定需要监控的核心业务指标和系统指标。
    - 设计日志 (Logging)、指标 (Metrics)、追踪 (Tracing) 的收集和分析方案。

**反思与决策检查点**: 我们的开发流程是否能保证代码质量和交付效率？当线上出现问题时，我们是否有能力快速定位和修复？

**交付物**: 《项目实施计划》，包含任务分解列表、迭代计划、CI/CD设计和可观测性方案。

---

## 4. 复盘与持续改进 (Phase 4: Retrospective & Continuous Improvement)

**目标**: 将每个开发周期的经验教训转化为团队和产品的持续进步。

**行动步骤**:
1.  **定期复盘会议 (Regular Retrospectives)**:
    - 在每个迭代/里程碑结束后，组织复盘会议。
    - 讨论三个核心问题：做得好的地方 (What went well?)，可以改进的地方 (What could be improved?)，以及下一步要采取的具体行动 (Action items)。
2.  **根本原因分析 (Root Cause Analysis)**:
    - 对于项目中出现的重大问题或事故，进行深入的根本原因分析（如 “五个为什么” 方法），避免同样的问题再次发生。
3.  **知识沉淀与分享 (Knowledge Management & Sharing)**:
    - 将复盘的结论、技术决策的思考过程、踩坑经验等沉淀为团队的知识库。
    - 鼓励团队内部的技术分享和学习。

**反思与决策检查点**: 我们的团队是否在不断学习和成长？我们是否在系统性地减少重复的错误？

**交付物**: 《复盘会议纪要》和更新的《团队最佳实践文档》。